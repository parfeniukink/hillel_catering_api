# Meeting summary for Last architecture decisions. Prepare for deployment | Python Pro (20.03.2025) Дмитро Парфенюк (03/20/2025)

Quick recap
Зустріч була присвячена розробці та вдосконаленню проекту, що включає обробку замовлень, оновлення баз даних та управління інфраструктурою з використанням Docker та мікросервісів. Дмитро продемонстрував різні аспекти роботи системи, зокрема налаштування файлів Docker Compose, управління замовленнями ресторанів та замовленнями на доставку, а також налаштування програми за допомогою змінних середовища. Обговорення також охоплювало усунення несправностей, обробку помилок та найкращі практики тестування та налагодження для забезпечення успіху програми у виробництві.
Next steps
• Команда із заміни жорстких значень у провайдерах змінними середовища від settings.py.
• Команда для оновлення конфігурації в docker-compose.yml для використання файлів .env.
• Команда для створення .env.default файл з базовою конфігурацією та .env файл для локальної розробки.
• Команда для оновлення Makefile з командами для запуску програми локально і в Docker.
• Команда для реалізації логіки кешування для зберігання статусів і ідентифікаторів замовлень.
• Команда для оновлення логіки обробки замовлень, щоб використовувати кешовані дані та оновлювати статуси відповідно.
• Команда для тестування та перевірки оновленого потоку замовлень з постачальниками тестів.

# Summary

## Обробка замовлень проекту та інфраструктура

Дмитро та Олександр обговорюють питання обробки замовлень проекту та оновлення бази даних. Вони планують усунути проблеми із замовленнями на їжу, додати повну функціональність доставки та забезпечити безпеку інфраструктури. Дмитро пояснює необхідність отримання ордера з бази даних та оновлення статусу замовлення. Вони вирішують спростити процес запуску інфраструктури, розширивши конфігурації Docker. Дмитро демонструє, як налаштувати файли Docker Compose для основного додатка, робочого та тест-провайдерів. Він також знайомить з концепцією багатоступеневих збірок і пояснює, як використовувати Makefiles для автоматизації виконання команд.

## Docker Compose Усунення несправностей та безпека

Дмитро обговорив процес запуску програми через Docker Compose, підкресливши важливість перевірки на вразливості та забезпечення цілісності. Він зіткнувся з помилкою команди Docker Compose, яка була вирішена шляхом додавання політики безпеки. Дмитро також продемонстрував навігацію та усунення неполадок у контейнерах Docker, підкресливши зручність Docker Compose для управління інфраструктурою. Він завершив, показавши, як запустити всю інфраструктуру за допомогою єдиної команди, що спрощує моніторинг і управління системою.

## Управління замовленнями в ресторані та процес доставки

Дмитро обговорив процес запуску та управління замовленнями ресторанів та замовленнями на доставку. Він пояснив, як система обробляє замовлення, включаючи створення замовлення, запуск працівника Celery та оновлення статусів замовлень. Дмитро також обговорив важливість синхронізації даних та використання кешу для зберігання інформації про замовлення. Він ввів нову структуру для кешу, яка включає в себе інформацію про замовлення, ресторани і парк доставки. Дмитро також обговорив необхідність валідації та мутації статусів замовлень та способи обробки помилок у системі. Він завершив обговоренням використання тест-провайдера та агрегації статусів від декількох провайдерів для формування внутрішнього статусу.

## Розробка додатків управління запасами

Дмитро обговорив розробку додатку, який працює за принципом управління запасами. Він пояснив інфраструктуру та те, як вона працює, включаючи використання Celery та Docker. Дмитро також продемонстрував, як створювати і управляти замовленнями, включаючи використання кешу і важливість оновлення статусу. Він підкреслив необхідність правильної конфігурації і тестування, щоб переконатися, що додаток працює правильно на виробництві. Дмитро також розповів про важливість обробки помилок та крайових випадків, а також про те, як уникнути таких проблем, як нескінченні цикли. Він зробив висновок, підкресливши необхідність ретельного тестування та налагодження, щоб забезпечити успіх програми.

## Змінні середовища для конфігурації додатків

Дмитро пояснює, як використовувати змінні середовища для конфігурації додатків. Він підкреслює їх важливість для безпеки, гнучкості та простоти використання. Дмитро демонструє, як створювати і отримувати доступ до змінних середовища в Python за допомогою модуля os. Потім він показує, як налаштувати файл .env для зберігання змінних конфігурації і обговорює кращі практики для визначення, які значення повинні бути змінними середовища. Дмитро також пояснює, як обробляти булеві значення та дає поради щодо налаштування додатків для роботи з Docker.

## Docker Складання мікросервісів Налаштування та усунення несправностей

Дмитро демонструє, як налаштовувати та запускати мікросервіси за допомогою Docker Compose, демонструючи дев’ять працюючих сервісів, серед яких тестові провайдери, поштова служба, база даних та брокер. Потім він пояснює, як налаштувати постачальників і перемикатися між локальною розробкою і Docker середовищами. Дмитро займається створенням та обробкою замовлень, висвітлюючи потенційні проблеми з кешуванням та пошуком даних. Він також показує, як використовувати Postman для тестування API і усунення деяких помилок, пов'язаних з обробкою замовлень і оновленням статусу.
