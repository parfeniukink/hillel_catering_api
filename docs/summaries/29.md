# Quick recap

Зустріч була присвячена розробці та впровадженню системи управління замовленнями між декількома постачальниками, з обговоренням структури коду, обробки помилок і послідовності даних. Команда зіткнулася з проблемами, пов'язаними з оновленнями статусу та взаємодією з базами даних, що призвело до поліпшення надійності та ефективності системи. Під час зустрічі був зроблений акцент на оптимізації коду, підвищення прозорості та розуміння загальної структури продукту, включаючи міркування щодо масштабованості та ефективного дизайну баз даних.
Next steps
• Команда розробників для реалізації кешування за допомогою Redis або іншої зовнішньої служби кешування для вирішення проблем з паралельними завданнями Celery з доступом до різних станів об'єктів.
• Команда розробників для рефакторингу логіки обробки замовлень, щоб використовувати централізований підхід відстеження статусу замовлення, а не окремі статуси для кожного ресторану.
• Команда розробників для впровадження належної реєстрації та моніторингу для працівників Celery для виявлення проблем з продуктивністю.
• Команда розробників для оптимізації запитів до баз даних, розглядаючи денормалізацію часто доступних даних, а не створення багатьох окремих таблиць.
• Команда розробників розглядає та потенційно рефакторує код інтеграції провайдера, щоб використовувати більш абстрактний та узагальнений підхід, подібний до розглянутого прикладу платіжної системи.

# Summary

## Тестування та інтеграція Delibery

Під час зустрічі Дмитро обговорив використання структури для випробувань та інтеграцію Delibery. Він пояснив процес створення замовлення, який передбачає, що користувач робить запит на створення замовлення та отримує ID для замовлення. Потім програма запускає працівника, який виконує діяльність, не залежну від процесу. Дмитро також обговорив використання схеми вторинного показу для візуального зображення комунікації декількох сервісів. Він продемонстрував, як використовувати цю діаграму, щоб зрозуміти, як користувач взаємодіє з системою і як система обробляє порядок. Дмитро також обговорив використання Celery для паралельного виконання та важливість оновлення статусу замовлення в базі даних. Він пояснив процес створення провайдера і як з його допомогою робити запити в систему. Дмитро також обговорив використання констант і структур для спрощення коду та зменшення кількості класів. Він закінчив розмову, заохочуючи команду практикуватися в написанні коду і задавати питання, якщо вони є.

## Система управління замовленнями Впровадження Обговорення

Під час зустрічі Дмитро та Олександр обговорили впровадження нової системи управління замовленнями та статусами. Вони зосередилися на створенні порядку кешу та його взаємодії з базою даних. Дмитро розповів про процес створення завдання для кожного замовлення та про те, як система обробляє кілька замовлень одночасно. Вони також обговорили важливість перевірки статусу кожного замовлення та потенційні проблеми, які можуть виникнути, якщо статус не оновлюється належним чином. Олександр висловив стурбованість складністю системи та можливістю виникнення помилок, але Дмитро запевнив його, що система призначена для вирішення цих питань. Вони завершили розмову планами продовжити вдосконалення системи та вирішення будь-яких проблем, що залишилися.

## Система обробки замовлень на рефакторинг для надійності

Дмитро та Олександр обговорюють рефакторинг та налагодження системи, яка обробляє замовлення через декількох провайдерів. Вони виявляють проблеми з обробкою помилок, узгодженістю даних і масштабованістю. Дмитро пропонує централізувати логіку та використовувати асинхронні функції для підвищення надійності. Вони вносять кілька коригувань коду, включаючи зміну процесу оновлення статусу та додавання операторів друку для налагодження. Після тестування вони підтверджують, що система тепер правильно оновлює статуси замовлень у різних постачальників.

## Налагодження проблеми оновлення бази даних

Дмитро та Олександр налагоджують проблему з додатком, де база даних не оновлюється, як очікувалося. Вони досліджують проблему, вивчаючи код, виконуючи тести та перевіряючи базу даних. Вони виявляють, що зміни стану зберігаються в кеші, але не записуються в базу даних. Вони намагаються різні рішення, включаючи зміну коду для збереження статусу безпосередньо в базі даних і перезапуск працівника Celery. Проблема залишається, і вони продовжують усувати неполадки, розглядаючи потенційні проблеми з транзакціями, Django ORM та порядком виконання функцій.

## Спрощення статусу та логічне обговорення

Дмитро та Олександр обговорили статус об’єкта у своїй системі. Вони вирішили спростити статус, віднісши його до верхньої лінії і обговорили можливі шляхи вирішення проблеми, пов’язаної зі статусом. Вони також обговорили логіку умови і можливість розміщення відбитка на бічній панелі. Вони перевірили різні сценарії і прийшли до висновку, що проблема може бути пов'язана з помилкою в попередньому місці.

## Оптимізація коду та підвищення прозорості

Дмитро провів навчальний посібник з оптимізації коду та підвищення його прозорості. Він продемонстрував, як створити метод оновлення статусу фронт-провайдера, який спростив код. Дмитро також обговорив важливість моніторингу та лісозаготівлі працівників селери для попередження проблем. Команда протестувала новий код і помітила, що він працює так, як очікувалося.

## Покращення послідовності кешу завдань селери

Дмитро пояснює питання з посиланнями на об’єкти пам’яті, що призводять до невідповідностей у завданнях Celery, де кожне завдання має свій кеш з повним набором ресторанів, які ніколи не оновлюються. Він пропонує перемістити кеш за межі працівника, наприклад, до Redis або іншої служби, щоб вирішити цю проблему. Дмитро також обговорює дизайн бази даних, радить не створювати забагато окремих таблиць, а замість цього зосередитися на ефективному побудові запитів. Він демонструє більш складну систему з використанням генеративних типів і абстрактних класів для роботи з декількома постачальниками платежів, підкреслюючи важливість розуміння загальної структури продукту.
