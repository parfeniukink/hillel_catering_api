# Quick recap

Ця зустріч була присвячена вдосконаленню системи обробки замовлень шляхом впровадження Celery, інструменту для управління фоновими завданнями, спільно з Django і RabbitMQ. Команда обговорила переваги використання моделі видавця-абонента над безперервною перевіркою, а також вивчила конфігурацію та інтеграцію Celery у свій проект. Вони стикалися і вирішували різні питання під час впровадження, включаючи серіалізацію завдань, циклічний імпорт і підключення брокерів, а також розглядали навантаження додатків і час обробки в їх розробці системи.

## Next steps

• Дмитру розслідувати та усунути проблему з неналежним завантаженням конфігурації Celery в Джанго.
• Дмитро створить коротке відео, в якому роз’яснить проблему конфігурації Celery та поділиться нею у Telegram-групі.
• Команда для реалізації обробки замовлень за допомогою Celery в наступній сесії.
• Команда для вивчення завдань моніторингу та налагодження, запущених в окремих процесах за допомогою Celery.

# Summary

## Удосконалення системи обробки замовлень

Дискусія фокусується на вдосконаленні існуючої системи обробки замовлень. Дмитро пояснює, що замість постійної перевірки замовлень кожні дві секунди, що може перевантажити процесор, краще використовувати модель видавця-абонента з окремим процесом зв’язку з чергою. Цей підхід є більш оптимізованим, оскільки він переміщує логіку безперервного циклу до спеціалізованого програмного забезпечення. Дмитро також пояснює відмінності між потоками та процесами, зазначивши, що процеси управляються операційною системою, їх легше контролювати та завершувати. Він пропонує використовувати готові робочі рішення, такі як Celery, для розподілених черг завдань замість ручного впровадження процесів.

## Інтеграція селери та конкурентоспроможність Обговорення

Дмитро обговорив використання популярного інструменту для управління фоновими завданнями Celery та його інтеграцію з Django. Він пояснив, як Celery працює з брокером для отримання і виконання завдань, а також як встановити і використовувати його в додатку Django. Він також торкнувся концепції конкурентоспроможності в контексті Селери і Джанго, а також можливості використання альтернативних інструментів, таких як Arches. Дмитро порадив не гратися з другорядними версіями Celery, оскільки це може спричинити проблеми з проектом.

## Селера для ефективної обробки завдань

Дмитро пояснює, що використання Celery для обробки завдань є більш ефективним, ніж їх поточний потоковий підхід. Він описує, як Celery дозволяє краще розподіляти ресурси і простіше відстежувати завдання, оскільки він посилає повідомлення, щоб почати обробку тільки тоді, коли це необхідно, а не постійно перевіряти. Олександр підтверджує своє розуміння, зазначивши, що Селера буде подавати сигнали для конкретних подій, а не безперервного моніторингу. Дмитро також рекомендує використовувати протокол AMQP для обміну інформацією та згадує, що при архівуванні типів Celery з’явилася нова версія підказок типу для Celery, яка нещодавно була оновлена.

## Інтеграція селери в обговорення проекту

Дмитро обговорив інтеграцію Celery в проект, підкресливши важливість чіткої сегрегації між компонентами інфраструктури. Він пояснив, як налаштувати Celery, включаючи використання просторів імен, завдання автоматичного виявлення та створення нового модуля для конфігурації. Дмитро також акцентував увагу на необхідності встановлення джанггезелерних вимикачів та насадки джанггезелери. Він зазначив, що функція періодичних завдань Селери зазвичай не використовується в проектах, оскільки віддають перевагу іншим системам оркестрування. Дмитро продемонстрував, як запустити проект, але зіткнувся з помилкою через неможливість підключення до черги. Він запропонував змінити конфігурацію брокера для вирішення цього питання.

## Селера та Конфігурація RabbitMQ

Дмитро розповів про налаштування та впровадження брокерської системи з використанням Celery та RabbitMQ. Він продемонстрував, як налаштовувати та виконувати завдання, а також як Celery використовує серіалізацію для кодування повідомлень. Він також підкреслив необхідність серіалізації при роботі зі складними структурами даних і використання JSON для сумісності мов крос-програмування.

## Рефакторинг для масштабування завдань селери

Дмитро провів дискусію щодо реалізації конкретної риси у своєму проекті. Спочатку вони зіткнулися з проблемою, коли вони не могли відправити повідомлення на поштову скриньку, як очікувалося. Після деякого усунення неполадок вони зрозуміли, що проблема полягала не в їх коді, а в завданні Celery. Дмитро пояснив, що завдання Селери не розпочинається через циклічне питання імпорту. Вони вирішили провести рефакторинг свого проекту, перемістивши завдання Celery в окрему частину інфраструктури. Це дозволило їм масштабувати свій проект горизонтально. Після внесення цих змін і перезапуску Celery вони змогли успішно відправляти повідомлення на поштову скриньку. Дмитро наголосив на важливості Celery у їхньому проекті та завершив розмову.

## Оптимізація навантаження додатків і завдань селери

Дмитро пояснює важливість врахування навантаження та часу обробки при проектуванні систем. Він обговорює, як такі операції, як відправка електронних листів, можуть зайняти значний час, особливо при використанні зовнішніх провайдерів. Дмитро пропонує використовувати такі інструменти, як Apache Benchmarks, для тестування продуктивності додатків під навантаженням. Потім розмова переходить до впровадження Celery для обробки завдань у своєму проекті. Дмитро демонструє, як ставити завдання та використовувати низькорівневий інтерфейс Celery для більшого контролю над виконанням завдань.

## Реалізація селери для замовлення їжі

Дмитро розповідає про впровадження системи замовлення продуктів харчування з використанням Celery для обробки завдань. Він створює клас OrdersService для обробки створення замовлень і додає завдання Celery для асинхронної обробки замовлень. Команда стикається з проблемами серіалізації та конфігурації завдань, які досліджує Дмитро. Він пояснює важливість правильного налаштування інтеграції Celery та Django, а також згадує про альтернативні рішення, такі як використання циклу подій. Дмитро підсумовує, зазначивши, що вони продовжать працювати над впровадженням та налагодженням системи обробки замовлень на основі Celery на майбутніх сесіях.
